# Victor AI - Personal AI Companion for Android
# Copyright (C) 2025-2026 Olga Kalinina

# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published
# by the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU Affero General Public License for more details.

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–ª–æ–∫ 

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ö–∞–∂–¥—É—é —Å—Ä–µ–¥—É –≤ 18:00 –Ω–∞–ø–æ–º–Ω–∏ –ø—Ä–æ –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∞"
           ‚Üì
[–≠—Ç–∞–ø 1] _call_chain_repeat_type()
    ‚Üí –ü—Ä–æ–º–ø—Ç: repeat_type_prompt
    ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç: {"repeat_weekly": true}
    ‚Üí @track_usage –°–†–ê–ë–ê–¢–´–í–ê–ï–¢ ‚úÖ
           ‚Üì
[–≠—Ç–∞–ø 2] _call_chain()
    ‚Üí –ü—Ä–æ–º–ø—Ç: reminder_parsing_prompt
    ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç: {"datetime": "...", "text": "–ü–æ—Ä–∞ –∫ –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥—É"}
    ‚Üí @track_usage –°–†–ê–ë–ê–¢–´–í–ê–ï–¢ ‚úÖ
           ‚Üì
[–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ]
    ‚Üí –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {
        "datetime": "2025-11-27 18:00",
        "text": "–ü–æ—Ä–∞ –∫ –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥—É",
        "repeat_weekly": true  ‚Üê –î–æ–±–∞–≤–ª–µ–Ω–æ –∏–∑ —ç—Ç–∞–ø–∞ 1
      }
           ‚Üì
[–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ reminders)]
```

## –õ–æ–≥–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ `parse()` –±—É–¥–µ—Ç:
1. –î–≤–∞ –ª–æ–≥–∞ `usage:` –æ—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ @track_usage (–æ–¥–∏–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–∑–æ–≤–∞ LLM)
2. –õ–æ–≥ `[üìÖ] –¢–∏–ø –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω: repeat_weekly=...`
3. –î–≤–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `update_model_usage()`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç (–ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π):
```bash
python tests/test_reminder_with_yaml.py
```

–ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–¥–µ - —Å–æ–∑–¥–∞–π—Ç–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏.

## –ü—Ä–∏–º–µ—Ä—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞

### –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ (repeat_weekly = false):
- "–ù–∞–ø–æ–º–Ω–∏ –∑–∞–≤—Ç—Ä–∞ –≤ 10:00 –ø–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ"
- "–ù–∞–ø–æ–º–Ω–∏ —á–µ—Ä–µ–∑ —á–∞—Å –ø—Ä–æ —Å–æ–∑–≤–æ–Ω"
- "–í –ø—è—Ç–Ω–∏—Ü—É –≤ 16:00 –Ω–∞–ø–æ–º–Ω–∏ –∑–∞–±—Ä–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã"
- "15 –Ω–æ—è–±—Ä—è –≤ 12:00 –Ω–∞–ø–æ–º–Ω–∏ –ø—Ä–æ –≤—Å—Ç—Ä–µ—á—É"

### –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è (repeat_weekly = true):
- "–ö–∞–∂–¥—É—é —Å—Ä–µ–¥—É –≤ 18:00 –Ω–∞–ø–æ–º–∏–Ω–∞–π –ø—Ä–æ –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∞"
- "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 21:30 –Ω–∞–ø–æ–º–Ω–∏ –ª–µ—á—å —Å–ø–∞—Ç—å"
- "–ü–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º –≤ 9:00 –Ω–∞–ø–æ–º–Ω–∏ –ø—Ä–æ –ø–ª–∞–Ω–µ—Ä–∫—É"
- "–ö–∞–∂–¥–æ–µ —É—Ç—Ä–æ –≤ 7:30 –Ω–∞–ø–æ–º–Ω–∏ –ø—Ä–æ –∑–∞—Ä—è–¥–∫—É"
- "–ü–æ –≤—ã—Ö–æ–¥–Ω—ã–º –≤ 10:00 –Ω–∞–ø–æ–º–Ω–∏ –ø—Ä–æ —É–±–æ—Ä–∫—É"

